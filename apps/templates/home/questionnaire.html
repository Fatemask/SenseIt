{% block content %}

    <section class="py-4 position-relative">
        <div id="carousel-questionnaire" class="carousel slide carousel-team" data-bs-interval="false" data-bs-wrap="false">
          <div class="carousel-inner">
            <form role="form" id="questionnaire-form" action="" method="post" autocomplete="off">
              {% csrf_token %}
            <div class="carousel-item active">
              <div class="container">
                <div class="row text-center">
                    <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Sadness </p>
                    <h4 class="text-dark"> Feeling sad or down in the dumps </h4>
                    <p class="my-4">
                      {{form.field1}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Discouragement </p>
                    <h4 class="text-dark"> Feeling hopeless </h4>
                    <p class="my-4">
                      {{form.field2}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Low self-esteem </p>
                    <h4 class="text-dark"> Feeling worthless</h4>
                    <p class="my-4">
                      {{form.field3}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Inferiority </p>
                    <h4 class="text-dark"> Feeling inadequate or inferior to others </h4>
                    <p class="my-4">
                      {{form.field4}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Guilt </p>
                    <h4 class="text-dark"> Self-critical and blame yourself for everything </h4>
                    <p class="my-4">
                      {{form.field5}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Indecisiveness </p>
                    <h4 class="text-dark"> Trouble making up your mind about things </h4>
                    <p class="my-4">
                      {{form.field6}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Irritability and Frustration </p>
                    <h4 class="text-dark"> Feeling resentful and angry a
                      good deal of the time </h4>
                    <p class="my-4">
                      {{form.field7}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Loss of interest in life </p>
                    <h4 class="text-dark"> Losing interest in career, hobbies, family, or friends </h4>
                    <p class="my-4">
                      {{form.field8}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Loss of motivation </p>
                    <h4 class="text-dark"> Feeling overwhelmed and have to try
                      hard to do things</h4>
                    <p class="my-4">
                      {{form.field9}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Poor self-image </p>
                    <h4 class="text-dark">Feeling old or unattractive</h4>
                    <p class="my-4">
                      {{form.field10}}
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Appetite changes </p>
                    <h4 class="text-dark">Loss of appetite or overeating </h4>
                    <p class="my-4">
                      {{form.field11}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Sleep changes </p>
                    <h4 class="text-dark"> Suffer from insomnia and/or hypersomnia </h4>
                    <p class="my-4">
                      {{form.field12}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Loss of libido </p>
                    <h4 class="text-dark"> Loss of interest in intimacy </h4>
                    <p class="my-4">
                      {{form.field13}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Hypochondriasis </p>
                    <h4 class="text-dark">Worrying about your health</h4>
                    <p class="my-4">
                      {{form.field14}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          
            <div class="carousel-item">
              <div class="container">
                <div class="row text-center">
                  <div class="col-6 mx-auto">
                    <p class="text-sm font-weight-bold mb-1"> Suicidal impulses </p>
                    <h4 class="text-dark"> Thoughts that life is not worth living or
                      any suicidal thoughts </h4>
                    <p class="my-4">
                      {{form.field15}}
                    </p>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-12 text-center">
                      <button type="submit" class="btn bg-gradient-dark">Calculate</button>
                  </div>                  
                </div>
              </div>
            </div>

            <a class="carousel-control-prev text-dark text-lg" href="#carousel-questionnaire" role="button" data-bs-slide="prev">
              <i class="fas fa-chevron-left"></i>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next text-dark text-lg" href="#carousel-questionnaire" role="button" data-bs-slide="next">
              <i class="fas fa-chevron-right"></i>
              <span class="sr-only">Next</span>
            </a>

          </form>
          </div>
          
        </div>
      </section>


{% endblock content %}

{% block javascripts %}
<script>

  var checkitem = function() {
  var $this;
  $this = $("carousel-questionnaire");
  if ($("#carousel-questionnaire .carousel-inner .item:first").hasClass("active")) {
    $this.children(".carousel-control-prev").hide();
    $this.children(".carousel-control-next").show();
  } else if ($("#carousel-questionnaire .carousel-inner .item:last").hasClass("active")) {
    $this.children(".carousel-control-next").hide();
    $this.children(".carousel-control-prev").show();
  } else {
    $this.children(".carousel-control").show();
  }
};

checkitem();

$("#carousel-questionnaire").on("slid.bs.carousel", "", checkitem);

</script>

<script src="https://code.jquery.com/jquery-3.5.1.js" 
integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" 
  crossorigin="anonymous"></script>

  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script type="text/javascript">
  var frm = $('#questionnaire-form');
  frm.submit(function () {
    event.preventDefault();
      $.ajax({
          type: 'POST',
          url: '{% url "assessment" %}',
          data: frm.serialize(),
          success: function (data) {
              $("#result").html(data);
              Swal.fire({
                title: 'Your score: ' + data,                
                icon: 'success',
                html: `<table id="table">
                  <thead>
                      <tr>
                          <th>Total Score</th>
                          <th>Degree of Depression</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr>
                          <td>0 - 4</td>
                          <td>Minimal or no depression</td>          
                      </tr>
                      <tr>
                          <td>5 – 10</td>
                          <td>Borderline depression</td>               
                      </tr>
                      <tr>
                          <td>11 – 20</td>
                          <td>Mild depression</td>                
                      </tr>
                      <tr>
                          <td>21 – 30</td>
                          <td>Moderate depression</td>                
                      </tr>
                      <tr>
                          <td>31 - 45</td>
                          <td>Severe depression</td>                
                      </tr>
                  </tbody>
                </table>`               
              })
          }         
      });
      return false;
  });
</script>

{% endblock javascripts %}
